<input id="login" type="button" value="Login"></input>
<p id="result"></p>

<script>

document.getElementById("login").addEventListener("click", function(event){
    event.preventDefault();
    var lastIndex = window.location.href.indexOf('#');
    if(lastIndex > -1) var url = window.location.href.substr(0, lastIndex);
    else var url = window.location.href;
    var pageData = JSON.stringify({
        "redirect_url": url,
        "time": Date.now(),
        "hostname": window.location.hostname
    });
    window.location.replace("https://html.adaptive.org.uk/login.php#" + window.btoa(pageData));
});

window.onload = function() {
    if(window.location.hash) {
        // console.log(window.location.hash);
        // var lastIndex = window.location.hash.indexOf('#');
        // var data = window.location.hash.substr(0, lastIndex)

        var obj = window.atob(window.location.hash.substr(1, window.location.hash.length - 1));
        // console.log(obj);
        document.getElementById("result").innerHTML = obj;
    }
}

</script>


<!-- surge -d frightening-chairs.surge.sh -p /Users/harri/Dev/adaptive-php/html-templates/auth/ -->
